---
alias: custom-wallet-ui
title: 'Custom Wallet UI'
description: 'Step-by-step instructions on how to use the white-labeled auth feature and disable Arcana wallet to use custom wallet UI in a Web3 app.'
arcana:
  root_rel_path: ../..
---

# Custom Wallet UI

In this guide, you will learn how Web3 apps that integrate with the {{config.extra.arcana.sdk_name}} can disable the built-in Arcana Wallet UI altogether and use a custom wallet UI to allow authenticated users to sign blockchain transactions. 

To use the white-labeled auth feature, the developers must first use the {{config.extra.arcana.dashboard_name}} to register the app, configure authentication providers and only then integrate the app with the {{config.extra.arcana.sdk_name}} and onboard users. 

In addition, developers must also build custom wallet UI and call the standard Ethereum JSON RPC calls supported by the {{config.extra.arcana.sdk_name}} for enabling the authenticated users to programmatically sign blockchain transactions.

## Prerequisites

{% include "./text-snippets/db_prerequisites.md" %}

## Step 1: Developer Dashboard Login

{% include "./text-snippets/db_login.md" %}

## Step 2: Register Application

{% include "./text-snippets/db_register_dapp.md" %}

To use a custom wallet UI, specify the **Wallet UI Mode** setting as 'Custom UI' before clicking the create button.

![Custom wallet UI selection](/img/an_db_select_custom_wallet_ui.png){.an-screenshots}

!!! note "Choosing Custom Wallet UI"

      Developers can choose the custom wallet UI option at the time of registering the app with {{config.extra.arcana.company_name}}. This is a one-time setting. Once selected, the setting cannot be changed later after the app is registered. The app can integrate with the {{config.extra.arcana.sdk_name}} and cannot use the built-in {{config.extra.arcana.wallet_name}} UI at all. Developers must create a custom wallet UI and plug in the requisite Web3 wallet operations.

You can view the **Wallet UI Mode** setting in the app configuration dashboard.

![Wallet UI Mode Setting Ref](/img/an_db_refer_wallet_ui_mode.png){.an-screenshots}

!!! caution "Global Keys Not supported"

      If a developer chooses white-labeled auth and plugs in a custom wallet UI, only app-specific keys are supported. What this means is that authenticated users will see different wallet addresses when they sign in using the same authentication provider in a different app in the {{config.extra.arcana.company_name}} ecosystem.

## Step 3: Configure Authentication Providers

Follow the instructions to [[index-configure-auth|configure authentication providers]] before integrating the app with the {{config.extra.arcana.sdk_name}}.

## Step 4: Integrate App

Use the appropriate integration method as per the app type and [[index-integrate|integrate the app]] with the {{config.extra.arcana.sdk_name}}.

## Step 5: Onboard Users

Apps that are integrated with the {{config.extra.arcana.sdk_name}} can choose the built-in [[concept-plug-and-play-auth|plug-and-play login UI]] or use custom login ui to onboard users. For details, see [[index-onboard-users|onboarding users documentation]]. 

## Step 6: Plug in Custom Wallet UI

Once user onboarding logic is in place, developers can add code to wire the custom wallet UI by using the standard Ethereum EIP-1193 provider. This provider can be obtained after instantiating the `AuthProvider` while integrating the app with the {{config.extra.arcana.sdk_name}}. 

Use the provider for calling JSON-RPC Web3 wallet operations and display UI notifications for allowing the users to approve or reject the blockchain request. Note that in the case of custom wallet UI, there will be no blockchain transaction notification pop-ups generated by the {{config.extra.arcana.sdk_name}}. Once the app developer issues the JSON-RPC wallet operations supported by the {{config.extra.arcana.sdk_name}}, the transaction is assumed to be approved and directly submitted to the requisite network as specified in the blockchain request. 

Here is a sample code snippet to demonstrate how a vanilla HTML/CSS/JS app can integrate with the {{config.extra.arcana.sdk_name}}, onboard users via plug-and-play login UI and use the standard EIP-1193 Ethereum provider for plugging in wallet functionality and blockchain signing operations with a custom wallet UI.

```js

import { AuthProvider } from "@arcana/auth";
import { ethers } from 'ethers';

let provider;
const auth = new AuthProvider('xar_live_nnnnnnnnnnnnnnncdddddddd')  //Use registered app client Id

// initialize the Arcana AuthProvider before calling any AuthProvider functions
...
await auth.init()
...

// onboard users - for e.g. using plug-and-play ui

const arcanaProvider = await auth.connect()

// alternatively, onboard users by calling loginWithLink(deprecated), `loginWithOTPStart`, `loginWithOTPComplete`, loginWithSocial, loginWithBearer for passwordless, social or custom IAM providers.
...

const provider = new ethers.providers.Web3Provider(arcanaProvider)

// Call ethers provider APIs see https://docs.ethers.org/v5/api/providers/provider/ for details
await provider.getBlockNumber()

// Use the Arcana provider to sign a message using JSON RPC calls

async function signMessage() {

  // Display a notification in custom wallet UI  showing the message details and seeking user's approval

  ...

  // Once user approves, issue the request via the Arcana Auth SDK to sign transaction

  const { sig } = await arcanaProvider.request({
    method: 'eth_sign',
    params: [
      {
        from, // sender account address
        data: 'Some message data',
      },
    ],
  })
  console.log({ sig })
}

...

// You can send tokens or use eth_sendtransaction functionality in custom wallet UI 
// Show a UI notification displaying the transaction details and ask for user's approval

...

// Use the Arcana provider to issue the send transaction

async function sendTransaction() {
  const hash = await arcanaProvider.request({
    method: 'eth_sendTransaction',
      params: [{
      from,
      gasPrice: 0,
      to: '0xE28F01Cf69f27Ee17e552bFDFB7ff301ca07e780', // receiver account address
      value: '0x0de0b6b3a7640000',
    },],
  })
  console.log({ hash })
}

...
```

Developers can also add code for other supported [[index-web3-wallet-ops|Web3 wallet operations]] as required by the app.

!!! tip "Getting Private Key with Custom Wallet UI"

      {% include "./code-snippets/custom-wallet-ui-pvt-key.md" %}

**That is all!**  :material-party-popper:

*The Web3 app is all set to _use custom wallet UI and allow authenticated app users_ to sign blockchain transactions.*

## What's Next?

After registering the app, configuring authentication providers, integrating the {{config.extra.arcana.sdk_name}} with the app and onboarding users, developers can further add code in the app to sign blockchain transactions, send and receive native, ERC20, or custom tokens, and more.

For a complete list of other JSON RPC calls supported by the {{config.extra.arcana.wallet_name}}, see [JSON-RPC Specifications](https://ethereum.github.io/execution-apis/api-documentation/).

## See also

* [[send-transaction|Send transactions]]
* [[check-balance|Check the wallet account balance]]
* [[watch-assets|Watch crypto assets]]
* [[web-auth-usage-guide| {{config.extra.arcana.sdk_name}} Usage Guide]]
* {% include "./text-snippets/authsdkref_url.md" %}
